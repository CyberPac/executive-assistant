#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Emergency Quality Gates - Pre-commit hooks
echo "ğŸš¨ Running Emergency Quality Gates..."

# TypeScript build check
echo "ğŸ”§ Running TypeScript build..."
npm run build || {
  echo "âŒ TypeScript build failed!"
  exit 1
}

# ESLint check with auto-fix
echo "ğŸ” Running ESLint..."
npm run lint:fix || {
  echo "âŒ ESLint errors found!"
  echo "Run 'npm run lint:fix' to fix automatically fixable issues"
  exit 1
}

# Type checking
echo "ğŸ” Running type check..."
npm run typecheck || {
  echo "âŒ TypeScript type errors found!"
  exit 1
}

# Test execution
echo "ğŸ§ª Running tests..."
npm run test || {
  echo "âŒ Tests failed!"
  exit 1
}

echo "âœ… All quality gates passed!"